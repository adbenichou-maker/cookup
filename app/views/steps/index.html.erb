
<div class="container-fluid p-3" style="background-color: #F7EEDB;">
  <header class="mb-4 pt-3">
    <div class="d-flex justify-content-between align-items-start">
      <div class="text-center flex-grow-1 mx-3">
        <h1 class="display-5 fw-bold mb-0" style="color: #4A4A4A;">
          <%= @recipe.title %> Steps
        </h1>
        <p class="text-muted small mt-1" style="color: #C9815B !important;">Follow these instructions to complete the dish.</p>
      </div>

    </div>
    <hr style="border-color: #8BAA7B;">
  </header>

  <div class="row">
    <div class="col-12">

      <section class="card shadow-sm mb-4">
        <ul class="list-group list-group-flush">
          <% @recipe.steps.each_with_index do |step, index| %>

            <li class="list-group-item p-4" style="border-left: 5px solid #8BAA7B;">

              <div class="d-flex align-items-center mb-2">
                <span class="badge rounded-pill me-3 p-2 fw-bold text-white"
                      style="background-color: #8BAA7B;">
                  <%= index + 1 %>
                </span>

                <h3 class="h5 fw-bold mb-0" style="color: #4A4A4A;">
                  <%= step.title %>
                </h3>
              </div>

              <p class="mb-0 ms-4" style="color: #4A4A4A; border-left: 1px dashed #C9815B; padding-left: 1rem;">
                <%= step.content %>
              </p>

              <% if step.skill.present? %>
                <%# Skill link is styled as a standalone block, not within a list %>
                <div class="mt-3 ms-4">
                  <h3 class="h6 fw-bold mb-2" style="color: #4A4A4A;">
                    Skill Required:
                  </h3>
                  <%= link_to skill_path(step.skill, recipe_id: @recipe.id), style: "text-decoration: none;" do %>
                    <div class="d-flex align-items-center p-2 rounded" style="background-color: #F2C94C; border: 1px solid #C9815B;">
                        <i class="bi bi-tools me-2" style="color: #4A4A4A;"></i>
                        <small class="fw-bold" style="color: #C9815B;">
                          <%= step.skill.title %>
                        </small>
                    </div>
                  <% end %>
                </div>
              <% end %>

            </li>
          <% end %>
        </ul>
      </section>

      <div class="d-grid mb-5">
        <%= link_to "FINISHED", congratulation_recipe_path(@recipe),
          class: "btn btn-lg fw-bold text-white shadow-lg",
          style: "background-color: #C9815B; border-color: #C9815B;" %>
      </div>

    </div>
  </div>
</div>
